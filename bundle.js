!function(){"use strict";function e(e,n,t=null){return fetch(n,{method:e,body:t}).then((e=>{if(!e.ok)throw Error(e.statusText);return e.json()})).catch((e=>{console.log(e)}))}function n(n){return new Promise((t=>{e("GET",n).then((e=>{t(e)}))}))}let t=new class{constructor(){this.hash="home"}loadPage(){return this.loadHome(),!0}async loadHome(){history.pushState(null,null,"#home");const e=document.getElementById("page-content");let t=await n("https://my-json-server.typicode.com/Ariiia/OKR4/products"),a=Object.entries(t).slice(0,4).map((e=>e[1]));e.innerHTML=`\n            <div class="slider middle">\n            \n                <div class="slides">\n                    <input type="radio" name="r" id="r1" checked>\n                    <input type="radio" name="r" id="r2">\n                    <input type="radio" name="r" id="r3">\n            \n                    <div class="slide s1"><a href="#action/cake_sale"><img src="images/bg1 - Copy.jpg" alt="bg1"></a></div>\n                    <div class="slide"><a href="#action/cherry_fever"><img src="images/bg_2 - Copy.jpg" alt="bg2"></a></div>\n                    <div class="slide"><a href="#action/new_year"><img src="images/bg3 - Copy.jpg" alt="bg3"></a></div>\n\n                </div>\n            \n                <div class="navigation">\n                    <label for="r1" class="bar"></label>\n                    <label for="r2" class="bar"></label>\n                    <label for="r3" class="bar"></label>\n                </div>\n            </div>\n\n\n            <div class="insides">\n                <h1>Без сахара, лактозы, муки и прочей чепухи </h1>\n                <p>Наши хиты </p>\n                <div class="parent">\n                    ${this.homeProducts(a)}\n                </div>\n            </div>\n        `,this.movingSlider()}homeProducts(e){let n="";return e.forEach((e=>{n+=`\n                <div class="child">\n                    <a href="#product/${e.url}">    \n                        <img src="${e.image}" width="500" height="500" alt="${e.image}">\n                        <h3>${e.title}</h3>\n                    </a>\n                </div>\n            `})),n}movingSlider(){let e=0,n=[];n[0]=document.getElementById("r1"),n[1]=document.getElementById("r2"),n[2]=document.getElementById("r3"),window.onload=function t(){n[e].click(),e<n.length-1?e++:e=0,setTimeout(t,5e3)}()}},a=new class{constructor(){this.hash="product"}loadPage(e){return null!=e&&(this.loadProduct(e),!0)}async loadProduct(e){const t=document.getElementById("page-content");let a=(await n("https://my-json-server.typicode.com/Ariiia/OKR4/products")).filter((n=>n.url===e))[0];t.innerHTML=`\n            <div class="containerp">\n    \n                \x3c!-- Left Column --\x3e\n                <div class="left-column">\n                    <img data-image="black" src="${a.image}" alt="image">   \n                </div>\n            \n            \n                \x3c!-- Right Column --\x3e\n                <div class="right-column">\n            \n                \x3c!-- Product Description --\x3e\n                <div class="product-description">\n                    <span>${a.category}</span>\n                    <h1>${a.title}</h1>\n                    ${a.description}\n                </div>\n            \n                \x3c!-- Product Pricing --\x3e\n                <div class="product-price">\n                    <span>${a.price} ₴</span>\n                    <a href="#cart/${a.url}" class="cart-btn">В корзину</a>\n                </div>\n                </div>\n            </div>\n        `}},i=new class{constructor(){this.hash="catalog"}loadPage(e){return this.loadCatalog(e),!0}async loadCatalog(e){const t=document.getElementById("page-content");let a=await n("https://my-json-server.typicode.com/Ariiia/OKR4/products"),i="сладости";null!=e&&("Deserts"==e?(a=a.filter((e=>"Десерты"===e.category)),i="десерты"):"Cakes"==e?(a=a.filter((e=>"Торты"===e.category)),i="торты"):"Cheesecakes"==e&&(a=a.filter((e=>"Чизкейки"===e.category)),i="чизкейки")),t.innerHTML=`\n            <h6>Наши ${i}</h6>\n            <div class="GRID">\n                \n                ${this.loadProducts(a)}\n            \n            </div>\n        `}loadProducts(e){let n="";return e.forEach((e=>{n+=`\n                <div class="onedes">\n                    <a href="#product/${e.url}">    \n                        <img src="${e.image}" alt="desert">\n                    </a>\n                    <div class="info">\n                        <strong> ${e.title}</strong>\n                        ${e.description}\n                    </div>\n                </div>\n            `})),n}},r=new class{constructor(){this.hash="action"}loadPage(e){return null!=e&&(this.loadAction(e),!0)}async loadAction(e){const t=document.getElementById("page-content");let a=(await n("https://my-json-server.typicode.com/Ariiia/OKR4/actions")).filter((n=>n.url===e));a=a[0],t.innerHTML=`\n            <div class="actions">\n                <p class="action-top">Страница акции</p>\n                <div class="act-container">\n                    <div class="act-img">\n                        <img src='${a.image}'>\n                    </div>\n                    <div class="post-content">\n                        <p class="act-date">До ${a.date}</p>\n                        <p class="act-name">${a.title}</p>\n                       \n                        <p class="act-description">${a.description}</p>\n                    </div>\n                </div>\n            </div>\n        `}},l=new class{constructor(){this.hash="cart",this.products,this.totalPrice=0,this.totalProducts=0}async loadPage(e){return this.products=await n("https://my-json-server.typicode.com/Ariiia/OKR4/products"),null==e?(this.loadCart(),!1):("clear"==e?this.clearCart():this.addItemToCartLocalStorage(e),!0)}loadCart(){const e=document.getElementById("page-content");let n=[],t=JSON.parse(localStorage.getItem("cart"));t.forEach((e=>{n.push(e.url)}));let a=this.products.filter((e=>n.includes(e.url)));e.innerHTML=this.loadCartTemplate(),t.length;let i=document.querySelector(".cart-body"),r=document.getElementById("cart-counter"),l=document.getElementById("total-price");a.forEach((e=>{let n=this.getAmountFromLocalStorage(e.url);this.totalProducts+=n,r.innerText=this.totalProducts,this.totalPrice+=e.price*n,l.innerText=this.totalPrice;let a=t.filter((n=>e.url===n.url))[0].amount;i.innerHTML+=this.loadCartDesertTemplate(e,a)})),a.forEach((e=>{document.getElementById("delete-"+e.url).addEventListener("click",(n=>{n.preventDefault(),t.forEach((n=>{n.url==e.url&&(r.innerText=parseInt(r.innerText)-n.amount,t.splice(t.indexOf(n),1))})),localStorage.setItem("cart",JSON.stringify(t)),this.loadCart()}))})),this.totalPrice=0,this.totalProducts=0}addItemToCartLocalStorage(e){window.location="#product/"+e;let n=document.getElementById("cart-counter"),t=JSON.parse(localStorage.getItem("cart"));if(!t)return t=[],t.push({url:e,amount:1}),localStorage.setItem("cart",JSON.stringify(t)),n.innerText=parseInt(n.innerText)+1,!0;let a=!1;for(let n=0;n<t.length;n++)if(t[n].url===e){t[n].amount++,a=!0;break}return a?(localStorage.setItem("cart",JSON.stringify(t)),n.innerText=parseInt(n.innerText)+1,!1):(t.push({url:e,amount:1}),localStorage.setItem("cart",JSON.stringify(t)),n.innerText=parseInt(n.innerText)+1,!0)}getAmountFromLocalStorage(e){let n=JSON.parse(localStorage.getItem("cart"));for(let t=0;t<n.length;t++)if(n[t].url===e)return n[t].amount}loadCartTemplate(){return`\n            <div id="cartcont">\n                <div class="cart-top">\n                    <h10 class="cart-title">Корзина</h10>\n                </div>\n                <div class="cart-content">\n                    <ul class="cart-body">\n                        \n                    </ul>\n                    <p class="total">\n                        <strong>Подытог:</strong>\n                        <strong><span class="amount" id="total-price">${this.totalPrice}</span> ₴</strong>\n                    </p>\n                    <p class="cart-button">\n                        <a href="#order"class="button checkout">\n                            Оформление заказа\n                        </a>\n                    </p>\n                </div>\n            </div>\n        `}loadCartDesertTemplate(e,n){return`\n                        <li class="cart-desert">\n                            <a href="#cart" class="remove-from-cart" id="delete-${e.url}" aria-label="Remove this item">\n                                ×\n                            </a> \n                                <span class="item-image">\n                                <a href="#product/${e.url}">\n                                    <img src="${e.image}" alt="" width="200" height="200">\n                                </a>\n                            </span>\n                            <span class="cart-description">\n                                <span class="cart-text">Название:   </span>\n                                <a href="#product/${e.url}" class="item-name">\n                                    ${e.title}\n                                </a>\n                                <span class="cart-quantity">\n                                    <div class="quantity">\n                                        <span class="cart-text" id="amount-${e.url}">Количество: ${n}</span>\n                                        \x3c!-- количество \n                                        <input type="number"  class="input-text"\n                                            step="1" min="0" max="" \n                                            value="2" title="Кол-во" size="10" inputmode="numeric"\n                                        >\n                                        --\x3e\n                                    </div>\n                                </span>\n                                <span class="item-price">\n                                    <span class="cart-text">Стоимость:   </span>\n                                    ${e.price*n}\n                                </span>\n                                ₴\n                            </span>\n                        </li>\n        `}clearCart(){localStorage.setItem("cart",JSON.stringify([])),this.totalPrice=0,this.totalProducts=0,document.getElementById("cart-counter").innerText=0}},s=new class{constructor(e){this.hash="order",this.cart=e}loadPage(e){return null==e?this.loadValidation():this.loadOrder(e),!0}loadValidation(){document.getElementById("page-content").innerHTML='\n            <div class="validation">\n                <p class="validation-top">Введение данных покупателя</p>\n                <form id="valid-form">\n                    <div>\n                        <label for="name">Имя</label>\n                        <input type="text" name="name" id="name" placeholder="Ваше имя" min="2" required>\n                    </div>\n                    <div>\n                        <label for="surname">Фамилия</label>\n                        <input type="text" name="surname" id="surname" placeholder="Вашa фамилия" min="2" required>\n                    </div>\n                    <div>\n                        <label for="email">Email</label>\n                        <input type="email" name="email" id="email" placeholder="Ваша почта" required>\n                    </div>\n                    <div>\n                        <label for="city">Город</label>\n                        <input type="text" name="city" id="city" placeholder="Ваш город" min="2" required>\n                    </div>\n                    <div>\n                        <label for="mobile">Номер телефона</label>\n                        <input type="tel" name="mobile" id="mobile" pattern="^\\+?3?8?(0\\d{9})$" placeholder="Ваш номер телефона" minlength="10" maxlength="13" required>\n                    </div>\n                    <div>\n                        <label for="delivery">Тип доставки</label>\n                    <select name="delivery" id="delivery">\n                        <option label="Курьер" value="Курьер"></option>\n                        <option label="Отделение почты" value="Отделение почты"></option>\n                    </select>\n                    </div>\n                    <div>\n                        <label for="card">Номер карты</label>\n                        <input type="text" name="card" id="card" pattern="(^(?:5[1-5][0-9]{2}|222[1-9]|22[3-9][0-9]|2[3-6][0-9]{2}|27[01][0-9]|2720)[0-9]{12}$)|(^4[0-9]{12}(?:[0-9]{3})?$)" minlength="16" maxlength="16" placeholder="Ваш номер карты" required>  \n                    </div>\n                    <div class="form-group" id="expiration-date">\n                        <label for="expiration">Конец действия карты</label>       \n                        <select id="select-year">                    \n                            <option value="21"> 2021</option>\n                            <option value="22"> 2022</option>\n                            <option value="23"> 2023</option>\n                            <option value="24"> 2024</option>\n                            <option value="25"> 2025</option>\n                            <option value="26"> 2026</option>\n                        </select>\n                        <select id="select-month">\n                            <option value="01">Январь</option>\n                            <option value="02">Февраль </option>\n                            <option value="03">Март</option>\n                            <option value="04">Апрель</option>\n                            <option value="05">Май</option>\n                            <option value="06">Июнь</option>\n                            <option value="07">Июль</option>\n                            <option value="08">Август</option>\n                            <option value="09">Сентябрь</option>\n                            <option value="10">Октябрь</option>\n                            <option value="11">Ноябрь</option>\n                            <option value="12">Декабрь</option>\n                        </select>\n                    </div>\n                    <div>\n                        <label for="cvv">CVV</label>\n                        <input type="password" name="cvv" id="cvv" placeholder="Ваш CVV" min="000" max="999" maxlength="3" size="10" required>  \n                    </div> \n                    <button type="submit">Подтвердить</button>\n                    <button id="reset" type="reset">Очистить</button>\n                </form>\n            </div>\n        ';let n=document.getElementById("valid-form");n.addEventListener("submit",(t=>{t.preventDefault();let a=`${n.elements.namedItem("select-month").value}/${n.elements.namedItem("select-year").value}`,i={name:n.elements.namedItem("name").value,surname:n.elements.namedItem("surname").value,email:n.elements.namedItem("email").value,city:n.elements.namedItem("city").value,tel:n.elements.namedItem("mobile").value,creditCardNumber:n.elements.namedItem("card").value,expiration:a,cvv:n.elements.namedItem("cvv").value},r=JSON.parse(localStorage.getItem("cart")),l={clientInformation:i,clientOrder:r};e("POST","https://my-json-server.typicode.com/Ariiia/OKR4/orders",JSON.stringify(l)).then((e=>{this.loadOrder(e.id,i)})).catch((e=>{console.log(e),this.showError()}))}))}loadOrder(e,n){history.pushState(null,null,"#order/"+e),document.getElementById("page-content").innerHTML=`\n            <p class="order-top">Мы готовим ваш заказ </p>\n            <div class="order">\n                <span class="head">Товар:</span>\n                <div id="ordered-deserts">\n                    ${this.orderedItems()}  \n                </div>\n                <span class="head">Ваши данные:</span>   \n                <div class="info-item">               \n                    <div class="item">\n                        <p class="left">Имя</p> \n                        <span></span> \n                        <p class="right">${n.name}</p>   \n                    </div>\n                    <div class="item">\n                        <p class="left">Фамилия</p> \n                        <span></span> \n                        <p class="right">${n.surname}</p>   \n                    </div>\n                    <div  class="item">\n                        <p class="left">Телефон</p> \n                        <span></span> \n                        <p class="right">${n.tel}</p>   \n                    </div>\n                    <div  class="item">\n                        <p class="left">Город</p> \n                        <span></span> \n                        <p class="right">${n.city}</p>   \n                    </div>\n                    <div  class="item">\n                        <p class="left">email</p> \n                        <span></span> \n                        <p class="right">${n.email}</p>   \n                    </div>\n                </div>\n                <div class="head">\n                    <span class="left">Статус заказа</span>\n                    <span></span> \n                    <span class="right">Собирается</span>\n                </div>       \n            </div>\n        `,this.cart.clearCart()}orderedItems(){let e=JSON.parse(localStorage.getItem("cart")),n=[];e.forEach((e=>{n.push(e.url)}));let t=this.cart.products.filter((e=>n.includes(e.url))),a="",i=0;return t.forEach((n=>{let t=e.filter((e=>n.url===e.url))[0].amount;a+=`\n                <div class="item">\n                    <span class="left">${n.title}  x${t}</span>      \n                    <span></span> \n                    <span class="right">${n.price*t} ₴</span>          \n                </div>\n            `,i+=n.price*t})),a+=`\n            <div class="info-item">\n                <span>Подытог:</span>\n                <span></span>\n                <span class="right">${i} ₴</span>   \n            </div>\n        `,a}showError(){document.getElementById("page-content").innerHTML='\n        <div role="alert">\n            Some problems with the data server. Sorry\n        </div>\n        '}}(l),o={home:"",product:["caramel","orangechoco","lavliheart","mangochia","strawberryyogurt","brauni","caramelyoghurt","strawberryyoghurt","cherry","marakuya"],catalog:["Deserts","Cakes","Cheesecakes"],action:["cherry_fever","new_year","cake_sale"],cart:["caramel","orangechoco","lavliheart","mangochia","strawberryyogurt","brauni","caramelyoghurt","strawberryyoghurt","cherry","marakuya","clear"],order:["1"]},c={home:t,product:a,catalog:i,action:r,cart:l,order:s};function d(e,n=null){if(e in o){if(null!=n&&o[e].includes(n))return c[e].loadPage(n)||t.loadHome(),!0;if(null==n)return c[e].loadPage(n)||t.loadHome(),!0}return!1}window.addEventListener("hashchange",(()=>function(){document.getElementById("page-content").innerHTML='\n    <div class="svg-loader">\n    <svg version="1.1" id="L4" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"\n        viewBox="0 0 100 100" enable-background="new 0 0 0 0" xml:space="preserve">\n        <circle fill="black" stroke="none" cx="6" cy="50" r="6">\n            <animate\n            attributeName="opacity"\n            dur="1s"\n            values="0;1;0"\n            repeatCount="indefinite"\n            begin="0.1"/>    \n        </circle>\n        <circle fill="black" stroke="none" cx="26" cy="50" r="6">\n            <animate\n            attributeName="opacity"\n            dur="1s"\n            values="0;1;0"\n            repeatCount="indefinite" \n            begin="0.2"/>       \n        </circle>\n        <circle fill="black" stroke="none" cx="46" cy="50" r="6">\n            <animate\n            attributeName="opacity"\n            dur="1s"\n            values="0;1;0"\n            repeatCount="indefinite" \n            begin="0.3"/>     \n        </circle>\n    </svg>\n    </div>\n    ';const e=window.location.hash.substring(1).split("/");let n,a;2==e.length?(n=e[0],a=e[1],d(n,a)||t.loadHome()):1==e.length?(n=e[0],d(n)||t.loadHome()):t.loadHome()}())),t.loadHome(),l.loadPage()}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9va3I1Ly4vanMvbWFpbkRCLmpzIiwid2VicGFjazovL29rcjUvLi9qcy9zY3JpcHQuanMiLCJ3ZWJwYWNrOi8vb2tyNS8uL2pzL2hvbWUuanMiLCJ3ZWJwYWNrOi8vb2tyNS8uL2pzL3Byb2R1Y3QuanMiLCJ3ZWJwYWNrOi8vb2tyNS8uL2pzL2NhdGFsb2cuanMiLCJ3ZWJwYWNrOi8vb2tyNS8uL2pzL2FjdGlvbi5qcyIsIndlYnBhY2s6Ly9va3I1Ly4vanMvY2FydC5qcyIsIndlYnBhY2s6Ly9va3I1Ly4vanMvb3JkZXIuanMiXSwibmFtZXMiOlsic2VuZFJlcXVlc3QiLCJtZXRob2QiLCJ1cmwiLCJib2R5IiwiZmV0Y2giLCJ0aGVuIiwicmVzcG9uc2UiLCJvayIsIkVycm9yIiwic3RhdHVzVGV4dCIsImpzb24iLCJjYXRjaCIsImVycm9yIiwiY29uc29sZSIsImxvZyIsImdldERCIiwiUHJvbWlzZSIsInJlc29sdmUiLCJkYXRhIiwiaG9tZVBhZ2UiLCJ0aGlzIiwiaGFzaCIsImxvYWRIb21lIiwiaGlzdG9yeSIsInB1c2hTdGF0ZSIsInBhZ2UiLCJkb2N1bWVudCIsImdldEVsZW1lbnRCeUlkIiwicHJvZHVjdHMiLCJwcm9kdWN0c190b19zaG93IiwiT2JqZWN0IiwiZW50cmllcyIsInNsaWNlIiwibWFwIiwiZW50cnkiLCJpbm5lckhUTUwiLCJob21lUHJvZHVjdHMiLCJtb3ZpbmdTbGlkZXIiLCJwcm9kdWN0c190b19zaG93X2NvbnRlbnQiLCJmb3JFYWNoIiwiY2FrZSIsImltYWdlIiwidGl0bGUiLCJpIiwiaW5wdXRzIiwid2luZG93Iiwib25sb2FkIiwic2xpZGVTbGlkZXIiLCJjbGljayIsImxlbmd0aCIsInNldFRpbWVvdXQiLCJwcm9kdWN0UGFnZSIsInN1Ykhhc2giLCJsb2FkUHJvZHVjdCIsImZpbHRlciIsInByb2R1Y3QiLCJjYXRlZ29yeSIsImRlc2NyaXB0aW9uIiwicHJpY2UiLCJjYXRhbG9nUGFnZSIsImxvYWRDYXRhbG9nIiwiY2F0ZWdvcnlfdGl0bGUiLCJsb2FkUHJvZHVjdHMiLCJhY3Rpb25QYWdlIiwibG9hZEFjdGlvbiIsImFjdGlvbiIsImRhdGUiLCJjYXJ0UGFnZSIsInRvdGFsUHJpY2UiLCJ0b3RhbFByb2R1Y3RzIiwibG9hZENhcnQiLCJjbGVhckNhcnQiLCJhZGRJdGVtVG9DYXJ0TG9jYWxTdG9yYWdlIiwiaXRlbXNJbkNhcnQiLCJjYXJ0TG9jYWxTdG9yYWdlIiwiSlNPTiIsInBhcnNlIiwibG9jYWxTdG9yYWdlIiwiZ2V0SXRlbSIsIml0ZW0iLCJwdXNoIiwiaXRlbXNUb1Nob3ciLCJpbmNsdWRlcyIsImxvYWRDYXJ0VGVtcGxhdGUiLCJjYXJ0X2JvZHkiLCJxdWVyeVNlbGVjdG9yIiwiY291bnRlckNhcnQiLCJ0b3RhbFByaWNlRWwiLCJpdGVtX2Ftb3VudCIsImdldEFtb3VudEZyb21Mb2NhbFN0b3JhZ2UiLCJpbm5lclRleHQiLCJhbW91bnQiLCJpdGVtU2hvdyIsImxvYWRDYXJ0RGVzZXJ0VGVtcGxhdGUiLCJhZGRFdmVudExpc3RlbmVyIiwiZSIsInByZXZlbnREZWZhdWx0IiwibG9jYWxJdGVtIiwicGFyc2VJbnQiLCJzcGxpY2UiLCJpbmRleE9mIiwic2V0SXRlbSIsInN0cmluZ2lmeSIsImxvY2F0aW9uIiwiaXRlbXNDYXJ0IiwiZXhpc3QiLCJkZXNlcnQiLCJvcmRlclBhZ2UiLCJjYXJ0IiwibG9hZFZhbGlkYXRpb24iLCJsb2FkT3JkZXIiLCJmb3JtIiwiZXhwaXJhdGlvbkRhdGUiLCJlbGVtZW50cyIsIm5hbWVkSXRlbSIsInZhbHVlIiwiY2xpZW50SW5mb3JtYXRpb24iLCJuYW1lIiwic3VybmFtZSIsImVtYWlsIiwiY2l0eSIsInRlbCIsImNyZWRpdENhcmROdW1iZXIiLCJleHBpcmF0aW9uIiwiY3Z2IiwiY2xpZW50T3JkZXIiLCJjbGllbnREYXRhIiwiaWQiLCJzaG93RXJyb3IiLCJvcmRlcmVkSXRlbXMiLCJvcmRlckJvZHkiLCJyb3V0cyIsInBhZ2VzIiwibG9hZENvbnRlbnQiLCJyb3V0ZSIsImxvYWRQYWdlIiwic3BsaXRlZFVybCIsInN1YnN0cmluZyIsInNwbGl0IiwiY2hhbmdlUGFnZSJdLCJtYXBwaW5ncyI6InlCQUFPLFNBQVNBLEVBQVlDLEVBQVFDLEVBQUtDLEVBQUssTUFDMUMsT0FBT0MsTUFBTUYsRUFBSyxDQUFDRCxPQUFRQSxFQUFRRSxLQUFNQSxJQUFPRSxNQUFLQyxJQUNqRCxJQUFLQSxFQUFTQyxHQUNWLE1BQU1DLE1BQU1GLEVBQVNHLFlBRXpCLE9BQU9ILEVBQVNJLFVBRWZDLE9BQU1DLElBQ0hDLFFBQVFDLElBQUlGLE1BSWpCLFNBQVNHLEVBQU1iLEdBQ2xCLE9BQU8sSUFBSWMsU0FBVUMsSUFDakJqQixFQUFZLE1BQU9FLEdBQ2RHLE1BQUthLElBQ0ZELEVBQVFDLFNDVHhCLElBQUlDLEVBQVcsSUNMQSxNQUNYLGNBQ0lDLEtBQUtDLEtBQU8sT0FJaEIsV0FFSSxPQURBRCxLQUFLRSxZQUNFLEVBR1gsaUJBQ0lDLFFBQVFDLFVBQVUsS0FBTSxLQUFNLFNBRTlCLE1BQU1DLEVBQU9DLFNBQVNDLGVBQWUsZ0JBRXJDLElBQUlDLFFBQWlCYixFQUFNLDREQUV2QmMsRUFBbUJDLE9BQU9DLFFBQVFILEdBQVVJLE1BQU0sRUFBRSxHQUFHQyxLQUFJQyxHQUFTQSxFQUFNLEtBRTlFVCxFQUFLVSxVQUFZLGtwQ0EwQkhmLEtBQUtnQixhQUFhUCwyREFLaENULEtBQUtpQixlQUdULGFBQWFSLEdBQ1QsSUFBSVMsRUFBMkIsR0FjL0IsT0FaQVQsRUFBaUJVLFNBQVFDLElBQ3JCRixHQUE0QixnRkFFQUUsRUFBS3RDLGdEQUNUc0MsRUFBS0Msd0NBQXdDRCxFQUFLQyx3Q0FDeERELEVBQUtFLGdGQU9wQkosRUFHWCxlQUVJLElBQUlLLEVBQUksRUFDSkMsRUFBUyxHQUdiQSxFQUFPLEdBQUtsQixTQUFTQyxlQUFlLE1BQ3BDaUIsRUFBTyxHQUFLbEIsU0FBU0MsZUFBZSxNQUNwQ2lCLEVBQU8sR0FBS2xCLFNBQVNDLGVBQWUsTUFVcENrQixPQUFPQyxPQVJQ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LFNBQVM3RCxHQUl0QyxPQUhXK0csRUFBTUUsR0FDUkMsU0FBU2xILElBQ2RGLEVBQVNHLFlBQ04sRUFFTixHQUFZLE1BQVJELEVBSUwsT0FIVytHLEVBQU1FLEdBQ1JDLFNBQVNsSCxJQUNkRixFQUFTRyxZQUNOLEVBR2YsT0FBTyxFQVNQdUIsT0FBT2lELGlCQUFpQixjQUFjLElBcEQxQyxXQUNJcEUsU0FBU0MsZUFBZSxnQkFBZ0JRLFVBakM3QiwraUNBbUNYLE1BQ01xRyxFQURNM0YsT0FBTzBELFNBQVNsRixLQUFLb0gsVUFBVSxHQUNwQkMsTUFBTSxLQUU3QixJQUFJckgsRUFDQStCLEVBRXFCLEdBQXJCb0YsRUFBV3ZGLFFBQ1g1QixFQUFPbUgsRUFBVyxHQUNsQnBGLEVBQVVvRixFQUFXLEdBRWhCSCxFQUFZaEgsRUFBTStCLElBQ25CakMsRUFBU0csWUFHYSxHQUFyQmtILEVBQVd2RixRQUNoQjVCLEVBQU9tSCxFQUFXLEdBRWJILEVBQVloSCxJQUNiRixFQUFTRyxZQUdiSCxFQUFTRyxXQTRCK0JxSCxLQUU1Q3hILEVBQVNHLFdBQ1Q2QyxFQUFTb0UsVyIsImZpbGUiOiJidW5kbGUuanMiLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgZnVuY3Rpb24gc2VuZFJlcXVlc3QobWV0aG9kLCB1cmwsIGJvZHk9bnVsbCkge1xuICAgIHJldHVybiBmZXRjaCh1cmwsIHttZXRob2Q6IG1ldGhvZCwgYm9keTogYm9keX0pLnRoZW4ocmVzcG9uc2UgPT4ge1xuICAgICAgICBpZiAoIXJlc3BvbnNlLm9rKSB7XG4gICAgICAgICAgICB0aHJvdyBFcnJvcihyZXNwb25zZS5zdGF0dXNUZXh0KTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmVzcG9uc2UuanNvbigpO1xuICAgIH0pXG4gICAgICAgIC5jYXRjaChlcnJvciA9PiB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhlcnJvcik7XG4gICAgICAgIH0pO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZ2V0REIodXJsKXtcbiAgICByZXR1cm4gbmV3IFByb21pc2UgKChyZXNvbHZlKSA9PiB7XG4gICAgICAgIHNlbmRSZXF1ZXN0KCdHRVQnLCB1cmwpXG4gICAgICAgICAgICAudGhlbihkYXRhID0+IHtcbiAgICAgICAgICAgICAgICByZXNvbHZlKGRhdGEpO1xuICAgICAgICAgICAgfSk7XG4gICAgfSk7XG59IiwiaW1wb3J0IEhvbWUgZnJvbSAnLi9ob21lLmpzJztcbmltcG9ydCBQcm9kdWN0IGZyb20gJy4vcHJvZHVjdC5qcyc7XG5pbXBvcnQgQ2F0YWxvZyBmcm9tICcuL2NhdGFsb2cuanMnO1xuaW1wb3J0IEFjdGlvbiBmcm9tICcuL2FjdGlvbi5qcyc7XG5pbXBvcnQgQ2FydCBmcm9tICcuL2NhcnQuanMnO1xuaW1wb3J0IE9yZGVyIGZyb20gJy4vb3JkZXIuanMnO1xuXG5sZXQgaG9tZVBhZ2UgPSBuZXcgSG9tZSgpO1xubGV0IHByb2R1Y3RQYWdlID0gbmV3IFByb2R1Y3QoKTtcbmxldCBjYXRhbG9nUGFnZSA9IG5ldyBDYXRhbG9nKCk7XG5sZXQgYWN0aW9uUGFnZSA9IG5ldyBBY3Rpb24oKTtcbmxldCBjYXJ0UGFnZSA9IG5ldyBDYXJ0KCk7XG5sZXQgb3JkZXJQYWdlID0gbmV3IE9yZGVyKGNhcnRQYWdlKTtcblxubGV0IHJvdXRzID0ge1xuICAgICdob21lJzogJycsXG4gICAgJ3Byb2R1Y3QnOiBbJ2NhcmFtZWwnLCAnb3JhbmdlY2hvY28nLCAnbGF2bGloZWFydCcsICdtYW5nb2NoaWEnLCAnc3RyYXdiZXJyeXlvZ3VydCcsXG4gICAgICAgICdicmF1bmknLCAnY2FyYW1lbHlvZ2h1cnQnLCAnc3RyYXdiZXJyeXlvZ2h1cnQnLCAnY2hlcnJ5JywgJ21hcmFrdXlhJ10sXG4gICAgJ2NhdGFsb2cnOiBbJ0Rlc2VydHMnLCAnQ2FrZXMnLCAnQ2hlZXNlY2FrZXMnXSxcbiAgICAnYWN0aW9uJzogWydjaGVycnlfZmV2ZXInLCAnbmV3X3llYXInLCAnY2FrZV9zYWxlJ10sXG4gICAgJ2NhcnQnOiBbJ2NhcmFtZWwnLCAnb3JhbmdlY2hvY28nLCAnbGF2bGloZWFydCcsICdtYW5nb2NoaWEnLCAnc3RyYXdiZXJyeXlvZ3VydCcsXG4gICAgICAgICdicmF1bmknLCAnY2FyYW1lbHlvZ2h1cnQnLCAnc3RyYXdiZXJyeXlvZ2h1cnQnLCAnY2hlcnJ5JywgJ21hcmFrdXlhJywgJ2NsZWFyJ10sXG4gICAgJ29yZGVyJzogWycxJ11cbn07XG5cbmxldCBwYWdlcyA9IHtcbiAgICAnaG9tZSc6IGhvbWVQYWdlLFxuICAgICdwcm9kdWN0JzogcHJvZHVjdFBhZ2UsXG4gICAgJ2NhdGFsb2cnOiBjYXRhbG9nUGFnZSxcbiAgICAnYWN0aW9uJzogYWN0aW9uUGFnZSxcbiAgICAnY2FydCc6IGNhcnRQYWdlLFxuICAgICdvcmRlcic6IG9yZGVyUGFnZVxufTtcblxuY29uc3QgbG9hZGVyID0gYFxuICAgIDxkaXYgY2xhc3M9XCJzdmctbG9hZGVyXCI+XG4gICAgPHN2ZyB2ZXJzaW9uPVwiMS4xXCIgaWQ9XCJMNFwiIHhtbG5zPVwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIiB4bWxuczp4bGluaz1cImh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmtcIiB4PVwiMHB4XCIgeT1cIjBweFwiXG4gICAgICAgIHZpZXdCb3g9XCIwIDAgMTAwIDEwMFwiIGVuYWJsZS1iYWNrZ3JvdW5kPVwibmV3IDAgMCAwIDBcIiB4bWw6c3BhY2U9XCJwcmVzZXJ2ZVwiPlxuICAgICAgICA8Y2lyY2xlIGZpbGw9XCJibGFja1wiIHN0cm9rZT1cIm5vbmVcIiBjeD1cIjZcIiBjeT1cIjUwXCIgcj1cIjZcIj5cbiAgICAgICAgICAgIDxhbmltYXRlXG4gICAgICAgICAgICBhdHRyaWJ1dGVOYW1lPVwib3BhY2l0eVwiXG4gICAgICAgICAgICBkdXI9XCIxc1wiXG4gICAgICAgICAgICB2YWx1ZXM9XCIwOzE7MFwiXG4gICAgICAgICAgICByZXBlYXRDb3VudD1cImluZGVmaW5pdGVcIlxuICAgICAgICAgICAgYmVnaW49XCIwLjFcIi8+ICAgIFxuICAgICAgICA8L2NpcmNsZT5cbiAgICAgICAgPGNpcmNsZSBmaWxsPVwiYmxhY2tcIiBzdHJva2U9XCJub25lXCIgY3g9XCIyNlwiIGN5PVwiNTBcIiByPVwiNlwiPlxuICAgICAgICAgICAgPGFuaW1hdGVcbiAgICAgICAgICAgIGF0dHJpYnV0ZU5hbWU9XCJvcGFjaXR5XCJcbiAgICAgICAgICAgIGR1cj1cIjFzXCJcbiAgICAgICAgICAgIHZhbHVlcz1cIjA7MTswXCJcbiAgICAgICAgICAgIHJlcGVhdENvdW50PVwiaW5kZWZpbml0ZVwiIFxuICAgICAgICAgICAgYmVnaW49XCIwLjJcIi8+ICAgICAgIFxuICAgICAgICA8L2NpcmNsZT5cbiAgICAgICAgPGNpcmNsZSBmaWxsPVwiYmxhY2tcIiBzdHJva2U9XCJub25lXCIgY3g9XCI0NlwiIGN5PVwiNTBcIiByPVwiNlwiPlxuICAgICAgICAgICAgPGFuaW1hdGVcbiAgICAgICAgICAgIGF0dHJpYnV0ZU5hbWU9XCJvcGFjaXR5XCJcbiAgICAgICAgICAgIGR1cj1cIjFzXCJcbiAgICAgICAgICAgIHZhbHVlcz1cIjA7MTswXCJcbiAgICAgICAgICAgIHJlcGVhdENvdW50PVwiaW5kZWZpbml0ZVwiIFxuICAgICAgICAgICAgYmVnaW49XCIwLjNcIi8+ICAgICBcbiAgICAgICAgPC9jaXJjbGU+XG4gICAgPC9zdmc+XG4gICAgPC9kaXY+XG4gICAgYDtcblxuZnVuY3Rpb24gY2hhbmdlUGFnZSgpe1xuICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwYWdlLWNvbnRlbnQnKS5pbm5lckhUTUwgPSBsb2FkZXI7XG5cbiAgICBjb25zdCB1cmwgPSB3aW5kb3cubG9jYXRpb24uaGFzaC5zdWJzdHJpbmcoMSk7XG4gICAgY29uc3Qgc3BsaXRlZFVybCA9IHVybC5zcGxpdCgnLycpO1xuXG4gICAgbGV0IGhhc2g7XG4gICAgbGV0IHN1Ykhhc2g7XG5cbiAgICBpZiAoc3BsaXRlZFVybC5sZW5ndGggPT0gMil7XG4gICAgICAgIGhhc2ggPSBzcGxpdGVkVXJsWzBdO1xuICAgICAgICBzdWJIYXNoID0gc3BsaXRlZFVybFsxXTtcblxuICAgICAgICBpZiAoIWxvYWRDb250ZW50KGhhc2gsIHN1Ykhhc2gpKVxuICAgICAgICAgICAgaG9tZVBhZ2UubG9hZEhvbWUoKTtcbiAgICB9XG5cbiAgICBlbHNlIGlmIChzcGxpdGVkVXJsLmxlbmd0aCA9PSAxKSB7XG4gICAgICAgIGhhc2ggPSBzcGxpdGVkVXJsWzBdO1xuXG4gICAgICAgIGlmICghbG9hZENvbnRlbnQoaGFzaCkpXG4gICAgICAgICAgICBob21lUGFnZS5sb2FkSG9tZSgpO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgaG9tZVBhZ2UubG9hZEhvbWUoKTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIGxvYWRDb250ZW50KHJvdXRlLCBoYXNoPW51bGwpIHtcbiAgICBpZiAocm91dGUgaW4gcm91dHMpIHtcbiAgICAgICAgaWYgKGhhc2ggIT0gbnVsbCAmJiByb3V0c1tyb3V0ZV0uaW5jbHVkZXMoaGFzaCkpIHtcbiAgICAgICAgICAgIGxldCBwYWdlID0gcGFnZXNbcm91dGVdO1xuICAgICAgICAgICAgaWYoIXBhZ2UubG9hZFBhZ2UoaGFzaCkpXG4gICAgICAgICAgICAgICAgaG9tZVBhZ2UubG9hZEhvbWUoKTtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGhhc2ggPT0gbnVsbCl7XG4gICAgICAgICAgICBsZXQgcGFnZSA9IHBhZ2VzW3JvdXRlXTtcbiAgICAgICAgICAgIGlmKCFwYWdlLmxvYWRQYWdlKGhhc2gpKVxuICAgICAgICAgICAgICAgIGhvbWVQYWdlLmxvYWRIb21lKCk7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gZmFsc2U7XG4gICAgXG59XG5cblxuXG5cbihmdW5jdGlvbiAoKSB7XG5cbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignaGFzaGNoYW5nZScsICgpID0+IGNoYW5nZVBhZ2UoaG9tZVBhZ2UpKTtcblxuICAgIGhvbWVQYWdlLmxvYWRIb21lKCk7XG4gICAgY2FydFBhZ2UubG9hZFBhZ2UoKTtcblxufSkoKTtcblxuIiwiaW1wb3J0IHtnZXREQn0gZnJvbSAnLi9tYWluREIuanMnO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBIb21lIHtcbiAgICBjb25zdHJ1Y3RvciAoKXtcbiAgICAgICAgdGhpcy5oYXNoID0gJ2hvbWUnO1xuXG4gICAgfVxuXG4gICAgbG9hZFBhZ2UoKXtcbiAgICAgICAgdGhpcy5sb2FkSG9tZSgpO1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG5cbiAgICBhc3luYyBsb2FkSG9tZSgpe1xuICAgICAgICBoaXN0b3J5LnB1c2hTdGF0ZShudWxsLCBudWxsLCAnI2hvbWUnKTtcblxuICAgICAgICBjb25zdCBwYWdlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3BhZ2UtY29udGVudCcpO1xuXG4gICAgICAgIGxldCBwcm9kdWN0cyA9IGF3YWl0IGdldERCKCdodHRwczovL215LWpzb24tc2VydmVyLnR5cGljb2RlLmNvbS9BcmlpaWEvT0tSNC9wcm9kdWN0cycpO1xuXG4gICAgICAgIGxldCBwcm9kdWN0c190b19zaG93ID0gT2JqZWN0LmVudHJpZXMocHJvZHVjdHMpLnNsaWNlKDAsNCkubWFwKGVudHJ5ID0+IGVudHJ5WzFdKTsgLy8gc2xpY2Ugb2JqZWN0IHRvIGZpcnN0IDRcblxuICAgICAgICBwYWdlLmlubmVySFRNTCA9IGBcbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJzbGlkZXIgbWlkZGxlXCI+XG4gICAgICAgICAgICBcbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwic2xpZGVzXCI+XG4gICAgICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPVwicmFkaW9cIiBuYW1lPVwiclwiIGlkPVwicjFcIiBjaGVja2VkPlxuICAgICAgICAgICAgICAgICAgICA8aW5wdXQgdHlwZT1cInJhZGlvXCIgbmFtZT1cInJcIiBpZD1cInIyXCI+XG4gICAgICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPVwicmFkaW9cIiBuYW1lPVwiclwiIGlkPVwicjNcIj5cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwic2xpZGUgczFcIj48YSBocmVmPVwiI2FjdGlvbi9jYWtlX3NhbGVcIj48aW1nIHNyYz1cImltYWdlcy9iZzEgLSBDb3B5LmpwZ1wiIGFsdD1cImJnMVwiPjwvYT48L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cInNsaWRlXCI+PGEgaHJlZj1cIiNhY3Rpb24vY2hlcnJ5X2ZldmVyXCI+PGltZyBzcmM9XCJpbWFnZXMvYmdfMiAtIENvcHkuanBnXCIgYWx0PVwiYmcyXCI+PC9hPjwvZGl2PlxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwic2xpZGVcIj48YSBocmVmPVwiI2FjdGlvbi9uZXdfeWVhclwiPjxpbWcgc3JjPVwiaW1hZ2VzL2JnMyAtIENvcHkuanBnXCIgYWx0PVwiYmczXCI+PC9hPjwvZGl2PlxuXG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICBcbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwibmF2aWdhdGlvblwiPlxuICAgICAgICAgICAgICAgICAgICA8bGFiZWwgZm9yPVwicjFcIiBjbGFzcz1cImJhclwiPjwvbGFiZWw+XG4gICAgICAgICAgICAgICAgICAgIDxsYWJlbCBmb3I9XCJyMlwiIGNsYXNzPVwiYmFyXCI+PC9sYWJlbD5cbiAgICAgICAgICAgICAgICAgICAgPGxhYmVsIGZvcj1cInIzXCIgY2xhc3M9XCJiYXJcIj48L2xhYmVsPlxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPC9kaXY+XG5cblxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cImluc2lkZXNcIj5cbiAgICAgICAgICAgICAgICA8aDE+0JHQtdC3INGB0LDRhdCw0YDQsCwg0LvQsNC60YLQvtC30YssINC80YPQutC4INC4INC/0YDQvtGH0LXQuSDRh9C10L/Rg9GF0LggPC9oMT5cbiAgICAgICAgICAgICAgICA8cD7QndCw0YjQuCDRhdC40YLRiyA8L3A+XG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cInBhcmVudFwiPlxuICAgICAgICAgICAgICAgICAgICAke3RoaXMuaG9tZVByb2R1Y3RzKHByb2R1Y3RzX3RvX3Nob3cpfVxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgIGA7XG5cbiAgICAgICAgdGhpcy5tb3ZpbmdTbGlkZXIoKTtcbiAgICB9XG5cbiAgICBob21lUHJvZHVjdHMocHJvZHVjdHNfdG9fc2hvdyl7XG4gICAgICAgIGxldCBwcm9kdWN0c190b19zaG93X2NvbnRlbnQgPSAnJztcblxuICAgICAgICBwcm9kdWN0c190b19zaG93LmZvckVhY2goY2FrZSA9PiB7XG4gICAgICAgICAgICBwcm9kdWN0c190b19zaG93X2NvbnRlbnQgKz0gYFxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJjaGlsZFwiPlxuICAgICAgICAgICAgICAgICAgICA8YSBocmVmPVwiI3Byb2R1Y3QvJHtjYWtlLnVybH1cIj4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICA8aW1nIHNyYz1cIiR7Y2FrZS5pbWFnZX1cIiB3aWR0aD1cIjUwMFwiIGhlaWdodD1cIjUwMFwiIGFsdD1cIiR7Y2FrZS5pbWFnZX1cIj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxoMz4ke2Nha2UudGl0bGV9PC9oMz5cbiAgICAgICAgICAgICAgICAgICAgPC9hPlxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgYDtcbiAgICAgICAgfSk7XG5cblxuICAgICAgICByZXR1cm4gcHJvZHVjdHNfdG9fc2hvd19jb250ZW50O1xuICAgIH1cblxuICAgIG1vdmluZ1NsaWRlcigpe1xuICAgICAgICAvLyBzbGlkZXJMb2dpY1xuICAgICAgICBsZXQgaSA9IDA7XG4gICAgICAgIGxldCBpbnB1dHMgPSBbXTtcbiAgICAgICAgbGV0IHRpbWUgPSA1MDAwO1xuICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgaW5wdXRzWzBdID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3IxJyk7XG4gICAgICAgIGlucHV0c1sxXSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdyMicpO1xuICAgICAgICBpbnB1dHNbMl0gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncjMnKTtcbiAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgIGZ1bmN0aW9uIHNsaWRlU2xpZGVyKCkge1xuICAgICAgICAgICAgaW5wdXRzW2ldLmNsaWNrKCk7XG4gICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgKGkgPCBpbnB1dHMubGVuZ3RoIC0gMSkgPyBpKysgOiBpID0gMDtcbiAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICBzZXRUaW1lb3V0KHNsaWRlU2xpZGVyLCB0aW1lKTtcbiAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgd2luZG93Lm9ubG9hZCA9IHNsaWRlU2xpZGVyKCk7XG4gICAgICAgIC8vIEVORCBzbGlkZXJMb2dpYyBcbiAgICB9XG59IiwiaW1wb3J0IHtnZXREQn0gZnJvbSAnLi9tYWluREIuanMnO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQcm9kdWN0IHtcbiAgICBjb25zdHJ1Y3Rvcigpe1xuICAgICAgICB0aGlzLmhhc2ggPSAncHJvZHVjdCc7XG4gICAgICAgIFxuICAgIH1cblxuICAgIGxvYWRQYWdlKHN1Ykhhc2gpe1xuICAgICAgICBpZiAoc3ViSGFzaCA9PSBudWxsKXtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMubG9hZFByb2R1Y3Qoc3ViSGFzaCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIFxuICAgIGFzeW5jIGxvYWRQcm9kdWN0KHN1Ykhhc2gpe1xuICAgICAgICBjb25zdCBwYWdlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3BhZ2UtY29udGVudCcpO1xuXG4gICAgICAgIGxldCBwcm9kdWN0cyA9IGF3YWl0IGdldERCKCdodHRwczovL215LWpzb24tc2VydmVyLnR5cGljb2RlLmNvbS9BcmlpaWEvT0tSNC9wcm9kdWN0cycpO1xuICAgICAgICBsZXQgcHJvZHVjdCA9IHByb2R1Y3RzLmZpbHRlcihwcm9kdWN0ID0+IHtcbiAgICAgICAgICAgIHJldHVybiBwcm9kdWN0LnVybCA9PT0gc3ViSGFzaDtcbiAgICAgICAgfSk7IFxuICAgICAgICBsZXQgY2FrZSA9IHByb2R1Y3RbMF07XG5cbiAgICAgICAgcGFnZS5pbm5lckhUTUwgPSBgXG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVwiY29udGFpbmVycFwiPlxuICAgIFxuICAgICAgICAgICAgICAgIDwhLS0gTGVmdCBDb2x1bW4gLS0+XG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImxlZnQtY29sdW1uXCI+XG4gICAgICAgICAgICAgICAgICAgIDxpbWcgZGF0YS1pbWFnZT1cImJsYWNrXCIgc3JjPVwiJHtjYWtlLmltYWdlfVwiIGFsdD1cImltYWdlXCI+ICAgXG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIDwhLS0gUmlnaHQgQ29sdW1uIC0tPlxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJyaWdodC1jb2x1bW5cIj5cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIDwhLS0gUHJvZHVjdCBEZXNjcmlwdGlvbiAtLT5cbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwicHJvZHVjdC1kZXNjcmlwdGlvblwiPlxuICAgICAgICAgICAgICAgICAgICA8c3Bhbj4ke2Nha2UuY2F0ZWdvcnl9PC9zcGFuPlxuICAgICAgICAgICAgICAgICAgICA8aDE+JHtjYWtlLnRpdGxlfTwvaDE+XG4gICAgICAgICAgICAgICAgICAgICR7Y2FrZS5kZXNjcmlwdGlvbn1cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIDwhLS0gUHJvZHVjdCBQcmljaW5nIC0tPlxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJwcm9kdWN0LXByaWNlXCI+XG4gICAgICAgICAgICAgICAgICAgIDxzcGFuPiR7Y2FrZS5wcmljZX0g4oK0PC9zcGFuPlxuICAgICAgICAgICAgICAgICAgICA8YSBocmVmPVwiI2NhcnQvJHtjYWtlLnVybH1cIiBjbGFzcz1cImNhcnQtYnRuXCI+0JIg0LrQvtGA0LfQuNC90YM8L2E+XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgYDtcbiAgICB9XG59IiwiaW1wb3J0IHtnZXREQn0gZnJvbSAnLi9tYWluREIuanMnO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBDYXRhbG9nIHtcbiAgICBjb25zdHJ1Y3Rvcigpe1xuICAgICAgICB0aGlzLmhhc2ggPSAnY2F0YWxvZyc7XG4gICAgICAgIFxuICAgIH1cblxuICAgIGxvYWRQYWdlKHN1Ykhhc2gpIHtcbiAgICAgICAgdGhpcy5sb2FkQ2F0YWxvZyhzdWJIYXNoKTtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuXG4gICAgYXN5bmMgbG9hZENhdGFsb2coc3ViSGFzaCkge1xuICAgICAgICBjb25zdCBwYWdlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3BhZ2UtY29udGVudCcpO1xuICAgICAgICBcbiAgICAgICAgbGV0IHByb2R1Y3RzID0gYXdhaXQgZ2V0REIoJ2h0dHBzOi8vbXktanNvbi1zZXJ2ZXIudHlwaWNvZGUuY29tL0FyaWlpYS9PS1I0L3Byb2R1Y3RzJyk7XG4gICAgICAgIFxuICAgICAgICBsZXQgY2F0ZWdvcnlfdGl0bGUgPSAn0YHQu9Cw0LTQvtGB0YLQuCc7XG5cbiAgICAgICAgaWYoc3ViSGFzaCAhPSBudWxsKXtcbiAgICAgICAgICAgIGlmIChzdWJIYXNoID09ICdEZXNlcnRzJyl7XG4gICAgICAgICAgICAgICAgcHJvZHVjdHMgPSBwcm9kdWN0cy5maWx0ZXIocHJvZHVjdCA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBwcm9kdWN0LmNhdGVnb3J5ID09PSAn0JTQtdGB0LXRgNGC0YsnO1xuICAgICAgICAgICAgICAgIH0pOyBcbiAgICAgICAgICAgICAgICBjYXRlZ29yeV90aXRsZSA9ICfQtNC10YHQtdGA0YLRiyc7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKHN1Ykhhc2ggPT0gJ0Nha2VzJyl7XG4gICAgICAgICAgICAgICAgcHJvZHVjdHMgPSBwcm9kdWN0cy5maWx0ZXIocHJvZHVjdCA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBwcm9kdWN0LmNhdGVnb3J5ID09PSAn0KLQvtGA0YLRiyc7XG4gICAgICAgICAgICAgICAgfSk7IFxuICAgICAgICAgICAgICAgIGNhdGVnb3J5X3RpdGxlID0gJ9GC0L7RgNGC0YsnO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChzdWJIYXNoID09ICdDaGVlc2VjYWtlcycpe1xuICAgICAgICAgICAgICAgIHByb2R1Y3RzID0gcHJvZHVjdHMuZmlsdGVyKHByb2R1Y3QgPT4ge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcHJvZHVjdC5jYXRlZ29yeSA9PT0gJ9Cn0LjQt9C60LXQudC60LgnO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIGNhdGVnb3J5X3RpdGxlID0gJ9GH0LjQt9C60LXQudC60LgnO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cblxuICAgICAgICBwYWdlLmlubmVySFRNTCA9IGBcbiAgICAgICAgICAgIDxoNj7QndCw0YjQuCAke2NhdGVnb3J5X3RpdGxlfTwvaDY+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVwiR1JJRFwiPlxuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICR7dGhpcy5sb2FkUHJvZHVjdHMocHJvZHVjdHMpfVxuICAgICAgICAgICAgXG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgYDtcbiAgICB9XG5cbiAgICBsb2FkUHJvZHVjdHMocHJvZHVjdHMpe1xuICAgICAgICBsZXQgcHJvZHVjdHNfdG9fc2hvd19jb250ZW50ID0gJyc7XG5cbiAgICAgICAgcHJvZHVjdHMuZm9yRWFjaChjYWtlID0+IHtcbiAgICAgICAgICAgIHByb2R1Y3RzX3RvX3Nob3dfY29udGVudCArPSBgXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cIm9uZWRlc1wiPlxuICAgICAgICAgICAgICAgICAgICA8YSBocmVmPVwiI3Byb2R1Y3QvJHtjYWtlLnVybH1cIj4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICA8aW1nIHNyYz1cIiR7Y2FrZS5pbWFnZX1cIiBhbHQ9XCJkZXNlcnRcIj5cbiAgICAgICAgICAgICAgICAgICAgPC9hPlxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiaW5mb1wiPlxuICAgICAgICAgICAgICAgICAgICAgICAgPHN0cm9uZz4gJHtjYWtlLnRpdGxlfTwvc3Ryb25nPlxuICAgICAgICAgICAgICAgICAgICAgICAgJHtjYWtlLmRlc2NyaXB0aW9ufVxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIGA7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHJldHVybiBwcm9kdWN0c190b19zaG93X2NvbnRlbnQ7XG4gICAgfVxufVxuIiwiaW1wb3J0IHtnZXREQn0gZnJvbSAnLi9tYWluREIuanMnO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBBY3Rpb24ge1xuICAgIGNvbnN0cnVjdG9yKCl7XG4gICAgICAgIHRoaXMuaGFzaCA9ICdhY3Rpb24nO1xuICAgICAgICBcbiAgICB9XG5cbiAgICBsb2FkUGFnZShzdWJIYXNoKXtcbiAgICAgICAgaWYgKHN1Ykhhc2ggPT0gbnVsbCl7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLmxvYWRBY3Rpb24oc3ViSGFzaCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIFxuICAgIGFzeW5jIGxvYWRBY3Rpb24oc3ViSGFzaCl7XG4gICAgICAgIGNvbnN0IHBhZ2UgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncGFnZS1jb250ZW50Jyk7XG5cbiAgICAgICAgbGV0IGFjdGlvbnMgPSBhd2FpdCBnZXREQignaHR0cHM6Ly9teS1qc29uLXNlcnZlci50eXBpY29kZS5jb20vQXJpaWlhL09LUjQvYWN0aW9ucycpO1xuICAgICAgICBsZXQgYWN0aW9uID0gYWN0aW9ucy5maWx0ZXIoYWN0aW9uID0+IHtcbiAgICAgICAgICAgIHJldHVybiBhY3Rpb24udXJsID09PSBzdWJIYXNoO1xuICAgICAgICB9KTsgXG4gICAgICAgIGFjdGlvbiA9IGFjdGlvblswXTtcblxuICAgICAgICBwYWdlLmlubmVySFRNTCA9IGBcbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJhY3Rpb25zXCI+XG4gICAgICAgICAgICAgICAgPHAgY2xhc3M9XCJhY3Rpb24tdG9wXCI+0KHRgtGA0LDQvdC40YbQsCDQsNC60YbQuNC4PC9wPlxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJhY3QtY29udGFpbmVyXCI+XG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJhY3QtaW1nXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICA8aW1nIHNyYz0nJHthY3Rpb24uaW1hZ2V9Jz5cbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJwb3N0LWNvbnRlbnRcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxwIGNsYXNzPVwiYWN0LWRhdGVcIj7QlNC+ICR7YWN0aW9uLmRhdGV9PC9wPlxuICAgICAgICAgICAgICAgICAgICAgICAgPHAgY2xhc3M9XCJhY3QtbmFtZVwiPiR7YWN0aW9uLnRpdGxlfTwvcD5cbiAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgICAgICA8cCBjbGFzcz1cImFjdC1kZXNjcmlwdGlvblwiPiR7YWN0aW9uLmRlc2NyaXB0aW9ufTwvcD5cbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgYDtcbiAgICB9XG59IiwiaW1wb3J0IHtnZXREQn0gZnJvbSAnLi9tYWluREIuanMnO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBDYXJ0IHtcbiAgICBjb25zdHJ1Y3Rvcigpe1xuICAgICAgICB0aGlzLmhhc2ggPSAnY2FydCc7XG4gICAgICAgIFxuICAgICAgICB0aGlzLnByb2R1Y3RzO1xuICAgICAgICB0aGlzLnRvdGFsUHJpY2UgPSAwO1xuICAgICAgICB0aGlzLnRvdGFsUHJvZHVjdHMgPSAwO1xuICAgIH1cblxuICAgIGFzeW5jIGxvYWRQYWdlKHN1Ykhhc2gpIHtcblxuICAgICAgICB0aGlzLnByb2R1Y3RzID0gYXdhaXQgZ2V0REIoJ2h0dHBzOi8vbXktanNvbi1zZXJ2ZXIudHlwaWNvZGUuY29tL0FyaWlpYS9PS1I0L3Byb2R1Y3RzJyk7XG5cbiAgICAgICAgaWYgKHN1Ykhhc2ggPT0gbnVsbCl7XG4gICAgICAgICAgICB0aGlzLmxvYWRDYXJ0KCk7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBpZihzdWJIYXNoID09ICdjbGVhcicpe1xuICAgICAgICAgICAgICAgIHRoaXMuY2xlYXJDYXJ0KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLmFkZEl0ZW1Ub0NhcnRMb2NhbFN0b3JhZ2Uoc3ViSGFzaCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG5cbiAgICBsb2FkQ2FydCgpIHtcbiAgICAgICAgY29uc3QgcGFnZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwYWdlLWNvbnRlbnQnKTtcbiAgICAgICAgXG4gICAgICAgIGxldCBpdGVtc0luQ2FydCA9IFtdO1xuICAgICAgICBsZXQgY2FydExvY2FsU3RvcmFnZSA9IEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2NhcnQnKSk7XG4gICAgICAgIGNhcnRMb2NhbFN0b3JhZ2UuZm9yRWFjaChpdGVtID0+IHtcbiAgICAgICAgICAgIGl0ZW1zSW5DYXJ0LnB1c2goaXRlbS51cmwpO1xuICAgICAgICB9KTtcblxuICAgICAgICBsZXQgaXRlbXNUb1Nob3cgPSB0aGlzLnByb2R1Y3RzLmZpbHRlcihwcm9kdWN0ID0+IHtcbiAgICAgICAgICAgIHJldHVybiBpdGVtc0luQ2FydC5pbmNsdWRlcyhwcm9kdWN0LnVybCk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHBhZ2UuaW5uZXJIVE1MID0gdGhpcy5sb2FkQ2FydFRlbXBsYXRlKCk7XG5cbiAgICAgICAgaWYoY2FydExvY2FsU3RvcmFnZS5sZW5ndGggPT0gMCl7XG4gICAgICAgICAgICAvLyBkaXNhYmxlIGJ1dHRvbnNcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIC8vIGVuYWJsZSBcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCBjYXJ0X2JvZHkgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuY2FydC1ib2R5Jyk7XG4gICAgICAgIGxldCBjb3VudGVyQ2FydCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjYXJ0LWNvdW50ZXInKTtcbiAgICAgICAgbGV0IHRvdGFsUHJpY2VFbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd0b3RhbC1wcmljZScpO1xuXG5cbiAgICAgICAgaXRlbXNUb1Nob3cuZm9yRWFjaChpdGVtID0+IHtcbiAgICAgICAgICAgIGxldCBpdGVtX2Ftb3VudCA9IHRoaXMuZ2V0QW1vdW50RnJvbUxvY2FsU3RvcmFnZShpdGVtLnVybCk7XG5cbiAgICAgICAgICAgIHRoaXMudG90YWxQcm9kdWN0cyArPSBpdGVtX2Ftb3VudDtcbiAgICAgICAgICAgIGNvdW50ZXJDYXJ0LmlubmVyVGV4dCA9IHRoaXMudG90YWxQcm9kdWN0cztcblxuICAgICAgICAgICAgdGhpcy50b3RhbFByaWNlICs9IChpdGVtLnByaWNlICogaXRlbV9hbW91bnQpO1xuICAgICAgICAgICAgdG90YWxQcmljZUVsLmlubmVyVGV4dCA9ICh0aGlzLnRvdGFsUHJpY2UpO1xuXG4gICAgICAgICAgICBsZXQgYW1vdW50ID0gY2FydExvY2FsU3RvcmFnZS5maWx0ZXIoaXRlbVNob3cgPT4ge1xuICAgICAgICAgICAgICAgIHJldHVybiBpdGVtLnVybCA9PT0gaXRlbVNob3cudXJsO1xuICAgICAgICAgICAgfSlbMF0uYW1vdW50O1xuXG4gICAgICAgICAgICBjYXJ0X2JvZHkuaW5uZXJIVE1MICs9IHRoaXMubG9hZENhcnREZXNlcnRUZW1wbGF0ZShpdGVtLCBhbW91bnQpO1xuXG4gICAgICAgICAgICBcbiAgICAgICAgfSk7XG5cbiAgICAgICAgaXRlbXNUb1Nob3cuZm9yRWFjaChpdGVtID0+IHtcbiAgICAgICAgICAgIGxldCBkZWxldGVfYnRuID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2RlbGV0ZS0nICsgaXRlbS51cmwpO1xuICAgICAgICAgICAgZGVsZXRlX2J0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiB7XG4gICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgICAgIGNhcnRMb2NhbFN0b3JhZ2UuZm9yRWFjaChsb2NhbEl0ZW0gPT4ge1xuICAgICAgICAgICAgICAgICAgICBpZihsb2NhbEl0ZW0udXJsID09IGl0ZW0udXJsKXtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvdW50ZXJDYXJ0LmlubmVyVGV4dCA9IHBhcnNlSW50KGNvdW50ZXJDYXJ0LmlubmVyVGV4dCkgLSBsb2NhbEl0ZW0uYW1vdW50O1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FydExvY2FsU3RvcmFnZS5zcGxpY2UoY2FydExvY2FsU3RvcmFnZS5pbmRleE9mKGxvY2FsSXRlbSksIDEpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7ICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdjYXJ0JywgSlNPTi5zdHJpbmdpZnkoY2FydExvY2FsU3RvcmFnZSkpO1xuICAgIFxuICAgICAgICAgICAgICAgIHRoaXMubG9hZENhcnQoKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcblxuICAgICAgICB0aGlzLnRvdGFsUHJpY2UgPSAwO1xuICAgICAgICB0aGlzLnRvdGFsUHJvZHVjdHMgPSAwO1xuXG4gICAgICAgIFxuICAgIH1cblxuICAgIGFkZEl0ZW1Ub0NhcnRMb2NhbFN0b3JhZ2Uoc3ViSGFzaCkge1xuICAgICAgICB3aW5kb3cubG9jYXRpb24gPSAnI3Byb2R1Y3QvJyArIHN1Ykhhc2g7XG4gICAgICAgIGxldCBjb3VudGVyQ2FydCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjYXJ0LWNvdW50ZXInKTtcblxuICAgICAgICBsZXQgaXRlbXNDYXJ0ID0gSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnY2FydCcpKTtcblxuICAgICAgICBpZighaXRlbXNDYXJ0KXtcbiAgICAgICAgICAgIGl0ZW1zQ2FydCA9IFtdO1xuICAgICAgICAgICAgaXRlbXNDYXJ0LnB1c2goe3VybDogc3ViSGFzaCwgYW1vdW50OiAxfSk7XG4gICAgICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgnY2FydCcsIEpTT04uc3RyaW5naWZ5KGl0ZW1zQ2FydCkpO1xuICAgICAgICAgICAgY291bnRlckNhcnQuaW5uZXJUZXh0ID0gcGFyc2VJbnQoY291bnRlckNhcnQuaW5uZXJUZXh0KSArIDE7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCBleGlzdCA9IGZhbHNlO1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGl0ZW1zQ2FydC5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgaWYgKGl0ZW1zQ2FydFtpXS51cmwgPT09IHN1Ykhhc2gpe1xuICAgICAgICAgICAgICAgIGl0ZW1zQ2FydFtpXS5hbW91bnQrKztcbiAgICAgICAgICAgICAgICBleGlzdCA9IHRydWU7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoIWV4aXN0KXtcbiAgICAgICAgICAgIGl0ZW1zQ2FydC5wdXNoKHt1cmw6IHN1Ykhhc2gsIGFtb3VudDogMX0pO1xuICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ2NhcnQnLCBKU09OLnN0cmluZ2lmeShpdGVtc0NhcnQpKTtcbiAgICAgICAgICAgIGNvdW50ZXJDYXJ0LmlubmVyVGV4dCA9IHBhcnNlSW50KGNvdW50ZXJDYXJ0LmlubmVyVGV4dCkgKyAxO1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cblxuICAgICAgICBcbiAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ2NhcnQnLCBKU09OLnN0cmluZ2lmeShpdGVtc0NhcnQpKTtcblxuICAgICAgICBjb3VudGVyQ2FydC5pbm5lclRleHQgPSBwYXJzZUludChjb3VudGVyQ2FydC5pbm5lclRleHQpICsgMTtcblxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgZ2V0QW1vdW50RnJvbUxvY2FsU3RvcmFnZSh1cmwpIHtcbiAgICAgICAgbGV0IGl0ZW1zQ2FydCA9IEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2NhcnQnKSk7XG5cbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBpdGVtc0NhcnQubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGlmIChpdGVtc0NhcnRbaV0udXJsID09PSB1cmwpe1xuICAgICAgICAgICAgICAgIHJldHVybiBpdGVtc0NhcnRbaV0uYW1vdW50O1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgbG9hZENhcnRUZW1wbGF0ZSgpIHtcbiAgICAgICAgcmV0dXJuIGBcbiAgICAgICAgICAgIDxkaXYgaWQ9XCJjYXJ0Y29udFwiPlxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJjYXJ0LXRvcFwiPlxuICAgICAgICAgICAgICAgICAgICA8aDEwIGNsYXNzPVwiY2FydC10aXRsZVwiPtCa0L7RgNC30LjQvdCwPC9oMTA+XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImNhcnQtY29udGVudFwiPlxuICAgICAgICAgICAgICAgICAgICA8dWwgY2xhc3M9XCJjYXJ0LWJvZHlcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICA8L3VsPlxuICAgICAgICAgICAgICAgICAgICA8cCBjbGFzcz1cInRvdGFsXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICA8c3Ryb25nPtCf0L7QtNGL0YLQvtCzOjwvc3Ryb25nPlxuICAgICAgICAgICAgICAgICAgICAgICAgPHN0cm9uZz48c3BhbiBjbGFzcz1cImFtb3VudFwiIGlkPVwidG90YWwtcHJpY2VcIj4ke3RoaXMudG90YWxQcmljZX08L3NwYW4+IOKCtDwvc3Ryb25nPlxuICAgICAgICAgICAgICAgICAgICA8L3A+XG4gICAgICAgICAgICAgICAgICAgIDxwIGNsYXNzPVwiY2FydC1idXR0b25cIj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxhIGhyZWY9XCIjb3JkZXJcImNsYXNzPVwiYnV0dG9uIGNoZWNrb3V0XCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAg0J7RhNC+0YDQvNC70LXQvdC40LUg0LfQsNC60LDQt9CwXG4gICAgICAgICAgICAgICAgICAgICAgICA8L2E+XG4gICAgICAgICAgICAgICAgICAgIDwvcD5cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICBgO1xuICAgIH1cblxuICAgIGxvYWRDYXJ0RGVzZXJ0VGVtcGxhdGUoZGVzZXJ0LCBhbW91bnQpIHtcbiAgICAgICAgcmV0dXJuIGBcbiAgICAgICAgICAgICAgICAgICAgICAgIDxsaSBjbGFzcz1cImNhcnQtZGVzZXJ0XCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGEgaHJlZj1cIiNjYXJ0XCIgY2xhc3M9XCJyZW1vdmUtZnJvbS1jYXJ0XCIgaWQ9XCJkZWxldGUtJHtkZXNlcnQudXJsfVwiIGFyaWEtbGFiZWw9XCJSZW1vdmUgdGhpcyBpdGVtXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIMOXXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9hPiBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJpdGVtLWltYWdlXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxhIGhyZWY9XCIjcHJvZHVjdC8ke2Rlc2VydC51cmx9XCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aW1nIHNyYz1cIiR7ZGVzZXJ0LmltYWdlfVwiIGFsdD1cIlwiIHdpZHRoPVwiMjAwXCIgaGVpZ2h0PVwiMjAwXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvYT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3NwYW4+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJjYXJ0LWRlc2NyaXB0aW9uXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwiY2FydC10ZXh0XCI+0J3QsNC30LLQsNC90LjQtTogICA8L3NwYW4+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxhIGhyZWY9XCIjcHJvZHVjdC8ke2Rlc2VydC51cmx9XCIgY2xhc3M9XCJpdGVtLW5hbWVcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICR7ZGVzZXJ0LnRpdGxlfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2E+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwiY2FydC1xdWFudGl0eVwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cInF1YW50aXR5XCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJjYXJ0LXRleHRcIiBpZD1cImFtb3VudC0ke2Rlc2VydC51cmx9XCI+0JrQvtC70LjRh9C10YHRgtCy0L46ICR7YW1vdW50fTwvc3Bhbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8IS0tINC60L7Qu9C40YfQtdGB0YLQstC+IFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPVwibnVtYmVyXCIgIGNsYXNzPVwiaW5wdXQtdGV4dFwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0ZXA9XCIxXCIgbWluPVwiMFwiIG1heD1cIlwiIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZT1cIjJcIiB0aXRsZT1cItCa0L7Quy3QstC+XCIgc2l6ZT1cIjEwXCIgaW5wdXRtb2RlPVwibnVtZXJpY1wiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC0tPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvc3Bhbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJpdGVtLXByaWNlXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzcz1cImNhcnQtdGV4dFwiPtCh0YLQvtC40LzQvtGB0YLRjDogICA8L3NwYW4+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAke2Rlc2VydC5wcmljZSAqIGFtb3VudH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9zcGFuPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICDigrRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3NwYW4+XG4gICAgICAgICAgICAgICAgICAgICAgICA8L2xpPlxuICAgICAgICBgO1xuICAgIH1cblxuXG4gICAgY2xlYXJDYXJ0KCl7XG4gICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdjYXJ0JywgSlNPTi5zdHJpbmdpZnkoW10pKTtcblxuICAgICAgICB0aGlzLnRvdGFsUHJpY2UgPSAwO1xuICAgICAgICB0aGlzLnRvdGFsUHJvZHVjdHMgPSAwO1xuXG4gICAgICAgIGxldCBjb3VudGVyQ2FydCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjYXJ0LWNvdW50ZXInKTtcbiAgICAgICAgY291bnRlckNhcnQuaW5uZXJUZXh0ID0gMDtcblxuICAgICAgICAvL3RoaXMubG9hZFBhZ2UoKTtcbiAgICB9XG5cbn1cbiIsImltcG9ydCB7c2VuZFJlcXVlc3R9IGZyb20gJy4vbWFpbkRCLmpzJztcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgT3JkZXIge1xuICAgIGNvbnN0cnVjdG9yKGNhcnQpe1xuICAgICAgICB0aGlzLmhhc2ggPSAnb3JkZXInO1xuXG4gICAgICAgIHRoaXMuY2FydCA9IGNhcnQ7XG4gICAgfVxuXG4gICAgbG9hZFBhZ2Uoc3ViSGFzaCl7XG4gICAgICAgIGlmIChzdWJIYXNoID09IG51bGwpe1xuICAgICAgICAgICAgdGhpcy5sb2FkVmFsaWRhdGlvbigpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5sb2FkT3JkZXIoc3ViSGFzaCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIFxuICAgIGxvYWRWYWxpZGF0aW9uKCl7XG4gICAgICAgIGNvbnN0IHBhZ2UgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncGFnZS1jb250ZW50Jyk7XG5cbiAgICAgICAgcGFnZS5pbm5lckhUTUwgPSBgXG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVwidmFsaWRhdGlvblwiPlxuICAgICAgICAgICAgICAgIDxwIGNsYXNzPVwidmFsaWRhdGlvbi10b3BcIj7QktCy0LXQtNC10L3QuNC1INC00LDQvdC90YvRhSDQv9C+0LrRg9C/0LDRgtC10LvRjzwvcD5cbiAgICAgICAgICAgICAgICA8Zm9ybSBpZD1cInZhbGlkLWZvcm1cIj5cbiAgICAgICAgICAgICAgICAgICAgPGRpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbCBmb3I9XCJuYW1lXCI+0JjQvNGPPC9sYWJlbD5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPVwidGV4dFwiIG5hbWU9XCJuYW1lXCIgaWQ9XCJuYW1lXCIgcGxhY2Vob2xkZXI9XCLQktCw0YjQtSDQuNC80Y9cIiBtaW49XCIyXCIgcmVxdWlyZWQ+XG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICA8ZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsIGZvcj1cInN1cm5hbWVcIj7QpNCw0LzQuNC70LjRjzwvbGFiZWw+XG4gICAgICAgICAgICAgICAgICAgICAgICA8aW5wdXQgdHlwZT1cInRleHRcIiBuYW1lPVwic3VybmFtZVwiIGlkPVwic3VybmFtZVwiIHBsYWNlaG9sZGVyPVwi0JLQsNGIYSDRhNCw0LzQuNC70LjRj1wiIG1pbj1cIjJcIiByZXF1aXJlZD5cbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgIDxkaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWwgZm9yPVwiZW1haWxcIj5FbWFpbDwvbGFiZWw+XG4gICAgICAgICAgICAgICAgICAgICAgICA8aW5wdXQgdHlwZT1cImVtYWlsXCIgbmFtZT1cImVtYWlsXCIgaWQ9XCJlbWFpbFwiIHBsYWNlaG9sZGVyPVwi0JLQsNGI0LAg0L/QvtGH0YLQsFwiIHJlcXVpcmVkPlxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgPGRpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbCBmb3I9XCJjaXR5XCI+0JPQvtGA0L7QtDwvbGFiZWw+XG4gICAgICAgICAgICAgICAgICAgICAgICA8aW5wdXQgdHlwZT1cInRleHRcIiBuYW1lPVwiY2l0eVwiIGlkPVwiY2l0eVwiIHBsYWNlaG9sZGVyPVwi0JLQsNGIINCz0L7RgNC+0LRcIiBtaW49XCIyXCIgcmVxdWlyZWQ+XG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICA8ZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsIGZvcj1cIm1vYmlsZVwiPtCd0L7QvNC10YAg0YLQtdC70LXRhNC+0L3QsDwvbGFiZWw+XG4gICAgICAgICAgICAgICAgICAgICAgICA8aW5wdXQgdHlwZT1cInRlbFwiIG5hbWU9XCJtb2JpbGVcIiBpZD1cIm1vYmlsZVwiIHBhdHRlcm49XCJeXFxcXCs/Mz84PygwXFxcXGR7OX0pJFwiIHBsYWNlaG9sZGVyPVwi0JLQsNGIINC90L7QvNC10YAg0YLQtdC70LXRhNC+0L3QsFwiIG1pbmxlbmd0aD1cIjEwXCIgbWF4bGVuZ3RoPVwiMTNcIiByZXF1aXJlZD5cbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgIDxkaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWwgZm9yPVwiZGVsaXZlcnlcIj7QotC40L8g0LTQvtGB0YLQsNCy0LrQuDwvbGFiZWw+XG4gICAgICAgICAgICAgICAgICAgIDxzZWxlY3QgbmFtZT1cImRlbGl2ZXJ5XCIgaWQ9XCJkZWxpdmVyeVwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgPG9wdGlvbiBsYWJlbD1cItCa0YPRgNGM0LXRgFwiIHZhbHVlPVwi0JrRg9GA0YzQtdGAXCI+PC9vcHRpb24+XG4gICAgICAgICAgICAgICAgICAgICAgICA8b3B0aW9uIGxhYmVsPVwi0J7RgtC00LXQu9C10L3QuNC1INC/0L7Rh9GC0YtcIiB2YWx1ZT1cItCe0YLQtNC10LvQtdC90LjQtSDQv9C+0YfRgtGLXCI+PC9vcHRpb24+XG4gICAgICAgICAgICAgICAgICAgIDwvc2VsZWN0PlxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgPGRpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbCBmb3I9XCJjYXJkXCI+0J3QvtC80LXRgCDQutCw0YDRgtGLPC9sYWJlbD5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPVwidGV4dFwiIG5hbWU9XCJjYXJkXCIgaWQ9XCJjYXJkXCIgcGF0dGVybj1cIiheKD86NVsxLTVdWzAtOV17Mn18MjIyWzEtOV18MjJbMy05XVswLTldfDJbMy02XVswLTldezJ9fDI3WzAxXVswLTldfDI3MjApWzAtOV17MTJ9JCl8KF40WzAtOV17MTJ9KD86WzAtOV17M30pPyQpXCIgbWlubGVuZ3RoPVwiMTZcIiBtYXhsZW5ndGg9XCIxNlwiIHBsYWNlaG9sZGVyPVwi0JLQsNGIINC90L7QvNC10YAg0LrQsNGA0YLRi1wiIHJlcXVpcmVkPiAgXG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiZm9ybS1ncm91cFwiIGlkPVwiZXhwaXJhdGlvbi1kYXRlXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWwgZm9yPVwiZXhwaXJhdGlvblwiPtCa0L7QvdC10YYg0LTQtdC50YHRgtCy0LjRjyDQutCw0YDRgtGLPC9sYWJlbD4gICAgICAgXG4gICAgICAgICAgICAgICAgICAgICAgICA8c2VsZWN0IGlkPVwic2VsZWN0LXllYXJcIj4gICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9XCIyMVwiPiAyMDIxPC9vcHRpb24+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT1cIjIyXCI+IDIwMjI8L29wdGlvbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPVwiMjNcIj4gMjAyMzwvb3B0aW9uPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9XCIyNFwiPiAyMDI0PC9vcHRpb24+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT1cIjI1XCI+IDIwMjU8L29wdGlvbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPVwiMjZcIj4gMjAyNjwvb3B0aW9uPlxuICAgICAgICAgICAgICAgICAgICAgICAgPC9zZWxlY3Q+XG4gICAgICAgICAgICAgICAgICAgICAgICA8c2VsZWN0IGlkPVwic2VsZWN0LW1vbnRoXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT1cIjAxXCI+0K/QvdCy0LDRgNGMPC9vcHRpb24+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT1cIjAyXCI+0KTQtdCy0YDQsNC70YwgPC9vcHRpb24+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT1cIjAzXCI+0JzQsNGA0YI8L29wdGlvbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPVwiMDRcIj7QkNC/0YDQtdC70Yw8L29wdGlvbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPVwiMDVcIj7QnNCw0Lk8L29wdGlvbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPVwiMDZcIj7QmNGO0L3RjDwvb3B0aW9uPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9XCIwN1wiPtCY0Y7Qu9GMPC9vcHRpb24+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT1cIjA4XCI+0JDQstCz0YPRgdGCPC9vcHRpb24+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT1cIjA5XCI+0KHQtdC90YLRj9Cx0YDRjDwvb3B0aW9uPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9XCIxMFwiPtCe0LrRgtGP0LHRgNGMPC9vcHRpb24+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT1cIjExXCI+0J3QvtGP0LHRgNGMPC9vcHRpb24+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT1cIjEyXCI+0JTQtdC60LDQsdGA0Yw8L29wdGlvbj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvc2VsZWN0PlxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgPGRpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbCBmb3I9XCJjdnZcIj5DVlY8L2xhYmVsPlxuICAgICAgICAgICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9XCJwYXNzd29yZFwiIG5hbWU9XCJjdnZcIiBpZD1cImN2dlwiIHBsYWNlaG9sZGVyPVwi0JLQsNGIIENWVlwiIG1pbj1cIjAwMFwiIG1heD1cIjk5OVwiIG1heGxlbmd0aD1cIjNcIiBzaXplPVwiMTBcIiByZXF1aXJlZD4gIFxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj4gXG4gICAgICAgICAgICAgICAgICAgIDxidXR0b24gdHlwZT1cInN1Ym1pdFwiPtCf0L7QtNGC0LLQtdGA0LTQuNGC0Yw8L2J1dHRvbj5cbiAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiBpZD1cInJlc2V0XCIgdHlwZT1cInJlc2V0XCI+0J7Rh9C40YHRgtC40YLRjDwvYnV0dG9uPlxuICAgICAgICAgICAgICAgIDwvZm9ybT5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICBgO1xuXG5cbiAgICAgICAgbGV0IGZvcm0gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndmFsaWQtZm9ybScpO1xuXG4gICAgICAgIGZvcm0uYWRkRXZlbnRMaXN0ZW5lcignc3VibWl0JywgZSA9PiB7XG4gICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICBsZXQgZXhwaXJhdGlvbkRhdGUgPSBgJHtmb3JtLmVsZW1lbnRzLm5hbWVkSXRlbSgnc2VsZWN0LW1vbnRoJykudmFsdWV9LyR7Zm9ybS5lbGVtZW50cy5uYW1lZEl0ZW0oJ3NlbGVjdC15ZWFyJykudmFsdWV9YDtcblxuICAgICAgICAgICAgbGV0IGNsaWVudEluZm9ybWF0aW9uID0ge1xuICAgICAgICAgICAgICAgIG5hbWU6IGZvcm0uZWxlbWVudHMubmFtZWRJdGVtKCduYW1lJykudmFsdWUsXG4gICAgICAgICAgICAgICAgc3VybmFtZTogZm9ybS5lbGVtZW50cy5uYW1lZEl0ZW0oJ3N1cm5hbWUnKS52YWx1ZSxcbiAgICAgICAgICAgICAgICBlbWFpbDogZm9ybS5lbGVtZW50cy5uYW1lZEl0ZW0oJ2VtYWlsJykudmFsdWUsXG4gICAgICAgICAgICAgICAgY2l0eTogZm9ybS5lbGVtZW50cy5uYW1lZEl0ZW0oJ2NpdHknKS52YWx1ZSxcbiAgICAgICAgICAgICAgICB0ZWw6IGZvcm0uZWxlbWVudHMubmFtZWRJdGVtKCdtb2JpbGUnKS52YWx1ZSxcbiAgICAgICAgICAgICAgICBjcmVkaXRDYXJkTnVtYmVyOiBmb3JtLmVsZW1lbnRzLm5hbWVkSXRlbSgnY2FyZCcpLnZhbHVlLFxuICAgICAgICAgICAgICAgIGV4cGlyYXRpb246IGV4cGlyYXRpb25EYXRlLFxuICAgICAgICAgICAgICAgIGN2djogZm9ybS5lbGVtZW50cy5uYW1lZEl0ZW0oJ2N2dicpLnZhbHVlXG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICBsZXQgY2xpZW50T3JkZXIgPSBKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdjYXJ0JykpO1xuXG4gICAgICAgICAgICBsZXQgY2xpZW50RGF0YSA9IHtjbGllbnRJbmZvcm1hdGlvbiwgY2xpZW50T3JkZXJ9O1xuXG4gICAgICAgICAgICBzZW5kUmVxdWVzdCgnUE9TVCcsICdodHRwczovL215LWpzb24tc2VydmVyLnR5cGljb2RlLmNvbS9BcmlpaWEvT0tSNC9vcmRlcnMnLCBKU09OLnN0cmluZ2lmeShjbGllbnREYXRhKSlcbiAgICAgICAgICAgICAgICAudGhlbiggZGF0YSA9PiB7ICAgIFxuICAgICAgICAgICAgICAgICAgICB0aGlzLmxvYWRPcmRlcihkYXRhLmlkLCBjbGllbnRJbmZvcm1hdGlvbik7XG4gICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgLmNhdGNoKChlcnJvcikgPT4ge1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlcnJvcik7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2hvd0Vycm9yKCk7XG4gICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIFxuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBsb2FkT3JkZXIoc3ViSGFzaCwgY2xpZW50SW5mb3JtYXRpb24pIHtcbiAgICAgICAgaGlzdG9yeS5wdXNoU3RhdGUobnVsbCwgbnVsbCwgJyNvcmRlci8nICsgc3ViSGFzaCk7XG4gICAgICAgIGNvbnN0IHBhZ2UgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncGFnZS1jb250ZW50Jyk7XG4gICAgICAgIHBhZ2UuaW5uZXJIVE1MID0gYFxuICAgICAgICAgICAgPHAgY2xhc3M9XCJvcmRlci10b3BcIj7QnNGLINCz0L7RgtC+0LLQuNC8INCy0LDRiCDQt9Cw0LrQsNC3IDwvcD5cbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJvcmRlclwiPlxuICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwiaGVhZFwiPtCi0L7QstCw0YA6PC9zcGFuPlxuICAgICAgICAgICAgICAgIDxkaXYgaWQ9XCJvcmRlcmVkLWRlc2VydHNcIj5cbiAgICAgICAgICAgICAgICAgICAgJHt0aGlzLm9yZGVyZWRJdGVtcygpfSAgXG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJoZWFkXCI+0JLQsNGI0Lgg0LTQsNC90L3Ri9C1Ojwvc3Bhbj4gICBcbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiaW5mby1pdGVtXCI+ICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJpdGVtXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICA8cCBjbGFzcz1cImxlZnRcIj7QmNC80Y88L3A+IFxuICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4+PC9zcGFuPiBcbiAgICAgICAgICAgICAgICAgICAgICAgIDxwIGNsYXNzPVwicmlnaHRcIj4ke2NsaWVudEluZm9ybWF0aW9uLm5hbWV9PC9wPiAgIFxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cIml0ZW1cIj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxwIGNsYXNzPVwibGVmdFwiPtCk0LDQvNC40LvQuNGPPC9wPiBcbiAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuPjwvc3Bhbj4gXG4gICAgICAgICAgICAgICAgICAgICAgICA8cCBjbGFzcz1cInJpZ2h0XCI+JHtjbGllbnRJbmZvcm1hdGlvbi5zdXJuYW1lfTwvcD4gICBcbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgIDxkaXYgIGNsYXNzPVwiaXRlbVwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgPHAgY2xhc3M9XCJsZWZ0XCI+0KLQtdC70LXRhNC+0L08L3A+IFxuICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4+PC9zcGFuPiBcbiAgICAgICAgICAgICAgICAgICAgICAgIDxwIGNsYXNzPVwicmlnaHRcIj4ke2NsaWVudEluZm9ybWF0aW9uLnRlbH08L3A+ICAgXG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICA8ZGl2ICBjbGFzcz1cIml0ZW1cIj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxwIGNsYXNzPVwibGVmdFwiPtCT0L7RgNC+0LQ8L3A+IFxuICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4+PC9zcGFuPiBcbiAgICAgICAgICAgICAgICAgICAgICAgIDxwIGNsYXNzPVwicmlnaHRcIj4ke2NsaWVudEluZm9ybWF0aW9uLmNpdHl9PC9wPiAgIFxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgPGRpdiAgY2xhc3M9XCJpdGVtXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICA8cCBjbGFzcz1cImxlZnRcIj5lbWFpbDwvcD4gXG4gICAgICAgICAgICAgICAgICAgICAgICA8c3Bhbj48L3NwYW4+IFxuICAgICAgICAgICAgICAgICAgICAgICAgPHAgY2xhc3M9XCJyaWdodFwiPiR7Y2xpZW50SW5mb3JtYXRpb24uZW1haWx9PC9wPiAgIFxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiaGVhZFwiPlxuICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzcz1cImxlZnRcIj7QodGC0LDRgtGD0YEg0LfQsNC60LDQt9CwPC9zcGFuPlxuICAgICAgICAgICAgICAgICAgICA8c3Bhbj48L3NwYW4+IFxuICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzcz1cInJpZ2h0XCI+0KHQvtCx0LjRgNCw0LXRgtGB0Y88L3NwYW4+XG4gICAgICAgICAgICAgICAgPC9kaXY+ICAgICAgIFxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgIGA7XG4gICAgICAgIHRoaXMuY2FydC5jbGVhckNhcnQoKTtcblxuICAgIH1cblxuICAgIG9yZGVyZWRJdGVtcygpIHtcbiAgICAgICAgbGV0IGNsaWVudE9yZGVyID0gSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnY2FydCcpKTtcblxuICAgICAgICBsZXQgaXRlbXNJbkNhcnQgPSBbXTtcbiAgICAgICAgY2xpZW50T3JkZXIuZm9yRWFjaChpdGVtID0+IHtcbiAgICAgICAgICAgIGl0ZW1zSW5DYXJ0LnB1c2goaXRlbS51cmwpO1xuICAgICAgICB9KTtcblxuICAgICAgICBsZXQgaXRlbXNUb1Nob3cgPSB0aGlzLmNhcnQucHJvZHVjdHMuZmlsdGVyKHByb2R1Y3QgPT4ge1xuICAgICAgICAgICAgcmV0dXJuIGl0ZW1zSW5DYXJ0LmluY2x1ZGVzKHByb2R1Y3QudXJsKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgbGV0IG9yZGVyQm9keSA9ICcnO1xuXG4gICAgICAgIGxldCB0b3RhbFByaWNlID0gMDtcblxuICAgICAgICBpdGVtc1RvU2hvdy5mb3JFYWNoKGRlc2VydCA9PiB7XG5cbiAgICAgICAgICAgIGxldCBhbW91bnQgPSBjbGllbnRPcmRlci5maWx0ZXIoaXRlbVNob3cgPT4ge1xuICAgICAgICAgICAgICAgIHJldHVybiBkZXNlcnQudXJsID09PSBpdGVtU2hvdy51cmw7XG4gICAgICAgICAgICB9KVswXS5hbW91bnQ7XG5cbiAgICAgICAgICAgIG9yZGVyQm9keSArPSBgXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cIml0ZW1cIj5cbiAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJsZWZ0XCI+JHtkZXNlcnQudGl0bGV9ICB4JHthbW91bnR9PC9zcGFuPiAgICAgIFxuICAgICAgICAgICAgICAgICAgICA8c3Bhbj48L3NwYW4+IFxuICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzcz1cInJpZ2h0XCI+JHtkZXNlcnQucHJpY2UqYW1vdW50fSDigrQ8L3NwYW4+ICAgICAgICAgIFxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgYDtcbiAgICAgICAgICAgIHRvdGFsUHJpY2UgKz0gZGVzZXJ0LnByaWNlKmFtb3VudDtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgb3JkZXJCb2R5ICs9IGBcbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJpbmZvLWl0ZW1cIj5cbiAgICAgICAgICAgICAgICA8c3Bhbj7Qn9C+0LTRi9GC0L7Qszo8L3NwYW4+XG4gICAgICAgICAgICAgICAgPHNwYW4+PC9zcGFuPlxuICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwicmlnaHRcIj4ke3RvdGFsUHJpY2V9IOKCtDwvc3Bhbj4gICBcbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICBgO1xuICAgICAgICByZXR1cm4gb3JkZXJCb2R5O1xuICAgIH1cblxuICAgIHNob3dFcnJvcigpe1xuICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncGFnZS1jb250ZW50JykuaW5uZXJIVE1MID0gYFxuICAgICAgICA8ZGl2IHJvbGU9XCJhbGVydFwiPlxuICAgICAgICAgICAgU29tZSBwcm9ibGVtcyB3aXRoIHRoZSBkYXRhIHNlcnZlci4gU29ycnlcbiAgICAgICAgPC9kaXY+XG4gICAgICAgIGA7XG4gICAgfVxufSJdLCJzb3VyY2VSb290IjoiIn0=